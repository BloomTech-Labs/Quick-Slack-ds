version: '3.7'
services:
    flask:
        env_file:
            - ./.env
        volumes:
            - './flask:/flask'
        ports:
            - 8000:8000
    redis:
        ports:
            - 6379:6379
        volumes:
            - 'redis:/var/lib/redis/data'
    postgres:
        env_file:
            - ./.env
        ports:
            - 5432:5432
    task-monitor:
        env_file:
            - ./.env
        ports:
            - 5555:5555
        volumes:
            - './flask:/flask'
    api:
        ports:
            - 8080:8080
        volumes:
            - './model:/api'
    notebook_server:
        build: ./notebook_server
        volumes:
            - './notebook_server/notebooks:/notebooks'
        command: jupyter lab
        ports:
            - 8888:8888

volumes:
    postgres:
    redis: